#  To handle WebSocket connections. When a browser or client initiates a WebSocket connection by sending an Upgrade header, Nginx can use this mapping to determine whether to upgrade the connection or close it based on the value of the Upgrade header.
map $http_upgrade $connection_upgrade {
    default upgrade;
    '' close;
}

server {
  set $forward_scheme http;
  set $server 127.0.0.1;
  set $port 80;

  listen 80;
  listen [::]:80;

  access_log /var/log/nginx/access.log main;

  include /etc/nginx/includes/default-locations.conf;
  include /etc/nginx/includes/block-exploits.conf;

  include /etc/nginx/includes/cors.conf;

  location / {
    root   html;
    index  index.html index.htm;
  }

  location = /50x.html {
    root   html;
  }
}
